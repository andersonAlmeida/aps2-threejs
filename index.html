<!DOCTYPE html>
<html>
<head>
	<title>Three JS</title>

	<script type="text/javascript" src="js/three.min.js"></script>
	<script type="text/javascript" src="js/MTLLoader.js"></script>
	<script type="text/javascript" src="js/OBJLoader.js"></script>

	<style type="text/css">
		canvas {
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	
</body>

	<script type="text/javascript">
		(function(){
			// common variables
			var wWidth = window.innerWidth,
				wHeight = window.innerHeight;

			// three js variables 
			var scene = new THREE.Scene(),
				camera = new THREE.PerspectiveCamera( 75, wWidth / wHeight, 0.2, 1000),
				renderer = new THREE.WebGLRenderer();


			renderer.setSize(wWidth, wHeight);
			// white bg
			renderer.setClearColor(0xffffff, 1);
			document.body.appendChild(renderer.domElement);

			// create a geometry ( cube )
			var geometry = new THREE.BoxGeometry(1, 1, 1),
				material = new THREE.MeshPhongMaterial({
					color: 0x00ff00,
					fFlatShading: true
				}),
				cube = new THREE.Mesh(geometry, material);

			// create objs
			var falcon = null;

			// add to the scene
			scene.add(cube);

			// set the camera position
			camera.position.z = 10;
			// camera.position.set(100, -400, 2000);

			scene.add(camera);

			//LIGHTNING
		    //first point light
		    light = new THREE.PointLight(0xffffff, 1, 4000);
		    light.position.set(50, 0, 0);
		    //the second one
		    light_two = new THREE.PointLight(0xffffff, 1, 4000);
		    light_two.position.set(-100, 800, 800);
		    //And another global lightning some sort of cripple GL
		    lightAmbient = new THREE.AmbientLight(0x404040);
		    scene.add(light, light_two, lightAmbient);

		    var mtlLoader = new THREE.MTLLoader();
		    mtlLoader.setTexturePath('millenium-falcon/');
		    mtlLoader.setPath('millenium-falcon/');
		    mtlLoader.load('millenium-falcon.mtl', function (materials) {
		     
		        materials.preload();
		     
		        var objLoader = new THREE.OBJLoader();
		        objLoader.setMaterials(materials);
		        objLoader.setPath('millenium-falcon/');
		        objLoader.load('millenium-falcon.obj', function (object) {
		     
		            scene.add(object);
		            object.position.y -= 60;
		     
		        });
		     
		    });

		    // function loadObj(obj) {

		    // 	var loader = new THREE.OBJLoader();

		    // 	loader.load(
		    // 		'models/' + obj,
		    // 		function( object ) { // onload
		    // 			console.log("Adiciona o obj na cena");
		    // 			falcon = object;// scene.add(object);
		    // 			object.traverse(function(child) {
	    	// 		        if (child instanceof THREE.Mesh) {
	    	// 		            child.material.color = 0xffb830;
	    	// 		        }
	    	// 		    });
	    	// 		    object.position.set(0, 0, 0);
	    	// 		    scene.add(object);
		    // 		},
		    // 		function( xhr ) { // onprogress 
		    // 			// console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );
		    // 		},
		    // 		function( error ) { onerror
		    // 			console.log( "Ocorreu um erro. ", error );
		    // 		}
		    // 	);
		    // }

		    // loadObj("millenium-falcon/millenium-falcon.obj");
		  
			// main loop
			function animate() {
				requestAnimationFrame(animate);

				cube.rotation.x += 0.01;
				cube.rotation.y += 0.01;

				renderer.render(scene, camera);
			}
			animate();
		})();

	</script>

</html>